<!-- Base Chart Component -->
<!-- 
    Required context variables:
    - chart: Dict with id, title, subtitle, dates, series, y_min, y_max
    - icon_type: String (medication, temp, dyspnea, cough, sputum, pain, weight, spo2, bp, hr)
-->
<div class="bg-white p-4 rounded-lg shadow-sm border border-slate-100">
    <div class="flex items-center gap-2 mb-4">
        <!-- Icon Switch Logic -->
        {% if icon_type == "medication" %}
            <span class="text-blue-500">ðŸ’Š</span>
        {% elif icon_type == "temp" %}
            <svg t="1766827471709" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="33204" width="32" height="32"><path d="M450.229677 610.60129v-243.084387H554.941935v243.084387c63.091613 19.654194 108.709161 73.728 108.709162 136.852645 0 79.57471-72.472774 144.68129-161.032258 144.681291-88.526452 0-161.032258-65.106581-161.032258-144.681291 0-63.124645 45.584516-117.198452 108.676129-136.852645z m215.04-44.791742c65.073548 45.022968 105.703226 116.339613 105.703226 195.220646 0 135.101935-121.922065 247.675871-268.288 247.675871-146.465032 0-268.453161-112.573935-268.453161-247.741936 0-82.547613 40.629677-150.065548 105.703226-195.220645V167.869935C339.901935 85.223226 413.167484 17.738323 502.585806 17.738323c89.451355 0 162.683871 67.584 162.683871 150.131612V565.842581zM603.994839 171.998968c0-55.362065-48.623484-95.991742-105.306839-95.991742-56.782452 0-105.339871 44.362323-105.339871 95.991742v416.900129c-64.908387 32.701935-105.438968 96.520258-105.438968 165.987097 0 107.024516 97.28 195.550968 214.74271 195.550967 117.528774 0 214.709677-88.592516 214.709677-195.550967 0-70.127484-44.593548-132.789677-105.306838-165.987097-8.125935 0-8.125935-416.900129-8.125936-416.900129h0.066065z" fill="#339966" p-id="33205"></path></svg>
        {% elif icon_type == "dyspnea" %}
            <svg t="1766827536383" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="35489" width="32" height="32"><path d="M816.896 425.325714c-31.780571-74.752-75.702857-135.826286-130.450286-181.686857-22.272-18.578286-49.152-24.173714-73.764571-15.36-25.6 9.289143-44.251429 32.914286-49.810286 63.085714v0.182858l-14.336 111.323428-17.846857-8.155428 0.512-236.617143A11.812571 11.812571 0 0 0 519.424 146.285714h-51.017143a11.812571 11.812571 0 0 0-11.776 11.812572l0.512 236.617143-17.883428 8.155428-14.299429-111.140571-0.109714-0.475429c-5.595429-30.208-24.137143-53.796571-49.737143-63.049143-24.685714-8.96-51.565714-3.328-73.874286 15.250286-54.784 45.824-98.742857 107.008-130.523428 181.650286C130.304 520.118857 109.714286 636.854857 109.714286 771.986286c0 41.216 14.226286 70.912 42.386285 88.210285 31.853714 19.675429 80.201143 22.528 143.762286 8.667429 46.811429-10.24 89.6-27.428571 101.924572-33.718857a124.16 124.16 0 0 0 55.990857-56.685714c11.300571-22.601143 17.078857-49.152 17.078857-78.848v-0.402286l-20.772572-221.586286 30.500572-12.470857 0.475428-0.292571a28.196571 28.196571 0 0 1 24.832 0l0.475429 0.292571 30.500571 12.470857-20.297142 221.403429v0.768c0 29.696 5.668571 56.246857 17.078857 78.884571a124.635429 124.635429 0 0 0 55.990857 56.649143c12.361143 6.290286 55.222857 23.515429 101.924571 33.718857a333.019429 333.019429 0 0 0 71.094857 8.667429c29.732571 0 54.052571-5.814857 72.667429-17.188572 28.16-17.334857 42.386286-47.030857 42.386286-88.246857 0.109714-135.241143-20.406857-251.977143-60.818286-346.989714zM290.194286 348.342857c-0.585143 0.804571-48.457143 64.914286-79.067429 157.366857a8.923429 8.923429 0 0 1-11.264 5.632 8.923429 8.923429 0 0 1-5.705143-11.337143c31.597714-95.488 79.725714-159.817143 81.810286-162.450285a8.996571 8.996571 0 0 1 12.544-1.792 9.142857 9.142857 0 0 1 1.682286 12.580571z m521.398857 321.316572h-0.768a8.96 8.96 0 0 1-8.923429-8.155429 731.794286 731.794286 0 0 0-15.323428-100.790857 8.923429 8.923429 0 1 1 17.371428-4.022857c7.277714 31.451429 12.544 66.267429 15.725715 103.350857a8.886857 8.886857 0 0 1-8.045715 9.618286z" fill="#4F99FE" p-id="35490"></path></svg>
        {% elif icon_type == "cough" %}
            <svg t="1766827585110" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="36666" width="32" height="32"><path d="M420.896 135.04c106.464-37.12 210.944-33.408 310.592 10.88v0.064c105.44 46.848 163.68 157.024 141.568 268a425.6 425.6 0 0 1-25.6 81.472l-1.504 3.008c-9.92 17.472-20.032 32.32-28.96 45.376-27.968 40.96-46.464 67.968-39.52 143.744 5.536 60.512 11.84 120.992 18.88 181.312a40.544 40.544 0 0 1-23.936 41.856 41.184 41.184 0 0 1-16.8 3.552h-267.232a40.8 40.8 0 0 1-40.544-46.848c7.2-46.656 1.696-70.528-2.432-75.744h-0.224c-55.872 1.504-112.128 0.064-114.72 0l-28.096-0.736 0.128-151.424c0.032-6.528-2.944-32.96-53.76-42.496A35.04 35.04 0 0 1 224 578.688a34.72 34.72 0 0 1-0.448-30.72c18.08-38.016 43.84-106.272 54.048-133.888a30.816 30.816 0 0 0 1.92-12.48c-2.72-49.152-0.64-213.6 140.864-266.368l0.544-0.192zM268.832 829.184c2.656 0.32 5.248 0.96 7.744 1.984l2.4 1.12a21.76 21.76 0 0 1 4.48 3.04l1.024 0.896 0.96 0.96 0.96 1.024 0.864 1.024a26.048 26.048 0 0 1 4.064 7.072l0.832 2.56c0.544 1.728 0.896 3.52 1.088 5.312l0.064 1.408v2.72l-0.064 1.408c-0.32 2.72-0.96 5.376-1.92 7.904l-1.152 2.464a22.176 22.176 0 0 1-1.376 2.4c-0.448 0.736-1.056 1.504-1.536 2.24-0.32 0.32-0.576 0.704-0.864 1.024l-0.96 0.992-1.984 1.888a25.504 25.504 0 0 1-6.88 4.096 26.144 26.144 0 0 1-7.744 2.016l-1.28 0.096h-2.72l-1.28-0.096a27.072 27.072 0 0 1-7.776-1.984l-2.4-1.088a16.512 16.512 0 0 1-2.24-1.44c-0.768-0.48-1.504-1.12-2.208-1.6l-1.024-0.96a19.104 19.104 0 0 1-1.888-1.92l-0.896-1.024a26.144 26.144 0 0 1-4-7.104 26.56 26.56 0 0 1-1.92-7.904l-0.128-1.408v-2.72a28.032 28.032 0 0 1 4.48-14.144l1.6-2.24a26.784 26.784 0 0 1 1.792-2.048l0.96-0.96a20.448 20.448 0 0 1 3.2-2.496 31.968 31.968 0 0 1 4.672-2.56 25.44 25.44 0 0 1 7.744-1.92l1.312-0.16a25.088 25.088 0 0 1 2.688 0l1.312 0.128z m413.984-298.08a28.8 28.8 0 0 0-29.248 12.576c-9.984 15.552-30.496 36.608-70.336 43.52-39.616-48.928-114.688-70.24-181.632-46.784a200.864 200.864 0 0 0-50.208 24.576 27.36 27.36 0 0 0-11.584 19.84 27.168 27.168 0 0 0 7.712 21.536l1.888 1.984a27.84 27.84 0 0 0 35.616 3.008 148.672 148.672 0 0 1 35.776-17.056c50.112-17.6 111.104 4.448 128 46.176 31.936 79.232 29.056 155.776 24.832 193.024a26.56 26.56 0 0 0 20.8 28.928l3.648 0.832a27.072 27.072 0 0 0 21.504-4.16 26.944 26.944 0 0 0 11.296-18.688c7.776-67.552 0.64-136-20.992-200.512a152.352 152.352 0 0 0 91.84-65.248v-0.032a28.416 28.416 0 0 0-18.912-43.52zM139.712 720.32a30.08 30.08 0 0 1 21.184 8.736 29.76 29.76 0 0 1-21.184 50.912 29.792 29.792 0 1 1 0-59.648z m69.344-24.128c2.656 0.32 5.248 1.024 7.712 2.016 0.832 0.32 1.664 0.768 2.432 1.152 1.6 0.768 3.104 1.792 4.48 2.944l0.992 0.928 0.96 0.96 0.96 0.992c2.08 2.4 3.744 5.12 4.896 8.096l0.896 2.592a27.712 27.712 0 0 1 1.056 5.376l0.096 1.344v2.72a33.024 33.024 0 0 1-2.016 9.312l-1.152 2.464a22.592 22.592 0 0 1-2.88 4.64l-0.928 0.992a23.104 23.104 0 0 1-0.896 1.056l-0.96 0.96a25.12 25.12 0 0 1-7.936 5.088 25.984 25.984 0 0 1-7.712 2.016l-1.344 0.064h-2.656l-1.376-0.096a27.2 27.2 0 0 1-16.544-8l-0.928-1.088a19.456 19.456 0 0 1-2.432-3.2 31.04 31.04 0 0 1-4.416-12.8l-0.096-1.408v-2.72c0-0.448 0-0.896 0.064-1.344a28.48 28.48 0 0 1 3.04-10.432c0.384-0.8 0.928-1.6 1.408-2.304l1.568-2.24 0.864-1.12 0.928-0.96 0.96-0.96 1.024-0.896a25.6 25.6 0 0 1 6.848-4.128 25.312 25.312 0 0 1 7.712-2.016l1.376-0.096h2.656l1.344 0.096z" fill="#d4237a" p-id="36667"></path></svg>
        {% elif icon_type == "sputum" %}
            <svg t="1766827678443" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="39424" width="32" height="32"><path d="M613.813191 889.566341c1.118248 21.470363 2.124671 40.033281 3.131094 54.905981 0.670949 10.287882-2.571971 19.569341-9.505108 26.949778-15.319999 16.438247-45.512697 19.904816-68.101308 19.904816-42.605252 0-100.306852-12.971678-119.205245-33.771092-6.709488-7.380437-7.604087-14.4254-7.044962-19.010217 1.565547-15.655473 11.40613-47.972842 22.924085-85.434153 14.089926-45.848171 33.211968-108.581888 30.192698-125.131959-1.565547-8.83416-5.926715-22.700436-10.958831-38.803208-12.971678-41.934303-30.863647-99.412254-29.857224-152.976336 0.670949-35.336639 5.367591-72.5743 13.307152-105.115319 7.604087-30.975472 17.22102-55.017805 27.397078-67.654009 2.012847-2.460146 4.472992-5.81489 7.380438-9.728758 22.476786-29.857224 69.219556-92.143641 145.148599-126.026558 2.683795-1.230073 5.479416-1.789197 8.498686-1.789196 13.754451 0 26.167005 12.971678 39.362332 26.614304 7.268612 7.492262 14.760875 15.319999 20.575764 18.786567 7.380437 4.361167 24.265983 9.840583 39.138683 14.64905 31.758245 10.399707 45.289047 15.319999 50.544813 23.371385 6.933138 10.287882 9.169634 20.911239 6.485839 30.528172-2.683795 9.952408-10.287882 17.891969-22.364962 23.706859-10.735181 5.143941-81.855759 46.51912-147.496921 93.932838-114.508603 82.862182-116.745099 114.061303-114.620427 121.553566 1.006423 3.802043 2.236496 7.156788 3.690219 10.287882 3.802043-1.341898 7.939561-2.124671 12.412553-2.124671 12.077079 0 25.160582 5.81489 34.777515 11.18248-3.466569-7.827737-4.808467-15.879123-4.025693-23.371384 1.230073-10.511532 6.709488-19.792991 15.543648-25.943356 5.032116-3.578394 11.070656-5.479416 17.556495-5.479415 19.010217 0 39.921456 17.66832 50.768463 28.291676 12.748028 11.741605 38.691383 35.672114 47.190068 42.828901 8.051386 6.821313 22.029487 22.476786 34.218391 36.231238 2.683795 3.01927 6.485839 7.268612 9.281459 10.287882 8.498685-11.182481 16.885546-19.345692 24.601458-23.818684 48.084667-28.179851 137.991812-119.428894 141.011082-145.260424s-22.253137-37.014011-28.962625-53.340433 5.255766-24.713282 4.249342-31.087297c-1.006423-6.374014-2.236496-12.748028-7.268612-16.214597-5.032116-3.578394-42.493427 16.438247-42.493427 16.438247 36.454887-19.010217 39.474157-37.125836 36.454887-44.841748S804.250837 341.065662 816.327916 331.001429c12.077079-10.064233 23.48321-31.534596 13.307153-47.637368-10.176057-16.214597-92.926415-8.945985-129.493127-95.833859S539.449694 69.219556 539.449694 69.219556C560.808232 58.037075 554.098744 0 554.098744 0c-69.443205 50.880287-107.687289 27.620727-130.835025 35.672114-128.374879 40.48058-221.301293 135.308017-221.301293 135.308016C19.017041 355.155588 126.480681 504.55353 184.741405 597.144471c58.260725 92.479116 141.346556 67.430359 194.910639 112.719405 53.564083 45.289047 8.498685 122.336339-12.412553 153.311811-20.911239 30.975472-47.749193 105.674443-47.749193 105.674443 163.264219 96.616633 370.363762 36.902186 370.363762 36.902186-12.971678-29.745399-21.023064-59.714447-25.272407-89.012546-17.332845-11.517955-36.007588-25.048757-51.439411-38.579559 0.22365 3.913868 0.447299 7.715912 0.670949 11.40613z" fill="#3BE3C3" p-id="39425"></path><path d="M613.589541 457.698936c65.529337-47.413718 136.649914-88.677072 147.496921-93.932838 12.077079-5.81489 19.569341-13.754451 22.364961-23.706859 2.683795-9.728758 0.447299-20.24029-6.485839-30.528173-5.367591-8.051386-18.786568-13.083502-50.544813-23.371384-14.872699-4.808467-31.758245-10.399707-39.138682-14.64905-5.926715-3.466569-13.418977-11.294306-20.575765-18.786568-13.195327-13.642626-25.607881-26.614304-39.362332-26.614304-2.907445 0-5.81489 0.559124-8.498685 1.789197-76.152694 33.771092-122.895463 95.945685-145.372249 125.914733-2.907445 3.913868-5.367591 7.156788-7.380438 9.728758-10.064233 12.636203-19.792991 36.678537-27.397078 67.654009-7.939561 32.429194-12.636203 69.77868-13.307152 105.115318-1.006423 53.675907 16.773721 111.042034 29.857224 152.976337 5.032116 16.102772 9.281459 29.969048 10.958831 38.803208 3.01927 16.438247-16.214597 79.283788-30.192698 125.131959-11.517955 37.46131-21.358538 69.77868-22.924085 85.434153-0.447299 4.584817 0.447299 11.62978 7.044962 19.010217 18.898392 20.911239 76.599993 33.771092 119.205245 33.771092 22.588611 0 52.669484-3.466569 68.101308-19.904816 6.933138-7.380437 10.176057-16.661896 9.505108-26.949778-1.006423-14.872699-2.012847-33.435617-3.131094-54.905981-0.22365-3.802043-0.447299-7.604087-0.559124-11.40613-2.907445-2.571971-5.703065-5.143941-8.275036-7.604087-22.253137-21.582188-39.921456-31.087296-50.321163-36.790362-5.143941-2.79562-9.169634-5.032116-12.748028-7.939561-0.559124-0.447299-3.466569-2.460146-5.255766-3.690219-24.042334-16.773721-45.959996-33.435617-49.426565-53.116783-1.453722-8.051386 0.335474-15.990947 4.920291-22.476786 4.361167-6.262189 10.511532-10.735181 17.556495-13.083503-0.22365-0.111825-0.335474-0.335474-0.559124-0.447299-5.143941-4.584817-9.952408-8.83416-11.741605-10.399707l-0.335474-0.22365c-5.479416-4.472992-14.537225-11.85343-21.470363-21.358538-17.44467-23.930509-7.156788-42.381602-2.012847-49.09109 1.901022-2.460146 3.913868-4.584817 6.150365-6.485839-7.044963-14.089926-7.156788-35.672114 15.319998-51.774886 2.348321-1.677372 4.920292-3.01927 7.604087-4.025693-1.453722-3.131095-2.683795-6.485839-3.690218-10.287882-2.124671-7.715912 0-38.915033 114.620427-121.777215z" fill="#85F9E3" p-id="39426"></path><path d="M914.957396 893.703859c-15.096349-11.40613-36.790362-39.138683-40.704229-48.531966-0.782774-5.81489 1.789197-29.521749 3.019269-41.151529 1.230073-11.070656 2.460146-22.588611 3.131095-33.547442 1.901022-26.726129-4.025693-39.809631-9.169634-51.439412-2.236496-5.143941-4.472992-9.952408-6.150365-16.550071-3.690219-14.313575 8.386861-62.286418 12.412554-72.79795 4.137518-6.933138 4.472992-15.655473 1.006423-24.154158-4.808467-11.741605-17.22102-24.154158-37.908609-24.154158-5.703065 0-11.741605 1.006423-17.89197 3.01927-39.362332 12.859853-47.972842 62.174593-51.103936 98.18218-0.670949 7.156788-1.118248 13.195327-1.453723 18.339269-12.636203-9.169634-41.934303-31.87007-46.407295-35.895763-0.559124-0.559124-1.789197-1.901022-3.354744-3.578394-2.79562-3.01927-6.597664-7.268612-9.281459-10.287883-12.300729-13.754451-26.167005-29.409924-34.218391-36.231237-8.386861-7.156788-34.442041-31.087296-47.190069-42.828901-10.847006-10.623357-31.758245-28.291676-50.768462-28.291676-6.485839 0-12.524378 1.901022-17.556495 5.479415-8.83416 6.262189-14.313575 15.431823-15.543648 25.943355-0.894598 7.492262 0.559124 15.543648 4.025693 23.371385-9.505109-5.367591-22.588611-11.182481-34.777515-11.182481-4.472992 0-8.61051 0.670949-12.412554 2.124672-2.683795 1.006423-5.255766 2.348321-7.604087 4.025693-22.476786 16.102772-22.476786 37.68496-15.319998 51.774885-2.236496 1.901022-4.249343 4.025693-6.150365 6.485839-5.255766 6.821313-15.431823 25.160582 2.012847 49.091091 6.933138 9.505109 15.990947 16.885546 21.470363 21.358538l0.335474 0.223649c1.789197 1.453722 6.709488 5.81489 11.741605 10.399708 0.22365 0.111825 0.335474 0.335474 0.559124 0.447299-7.044963 2.348321-13.195327 6.821313-17.556495 13.083502-4.584817 6.485839-6.374014 14.4254-4.920291 22.476786 3.466569 19.681166 25.384231 36.343062 49.426565 53.116784 1.789197 1.230073 4.696642 3.242919 5.255766 3.690219 3.466569 2.907445 7.604087 5.143941 12.748028 7.939561 10.511532 5.703065 28.068027 15.319999 50.321163 36.790361 2.683795 2.571971 5.367591 5.143941 8.275036 7.604087 15.431823 13.530802 34.106566 26.949779 51.439411 38.579559 15.543648 10.399707 29.969048 19.345692 39.809631 25.384231 4.584817 2.79562 8.498685 5.255766 10.399707 6.485839 5.367591 3.578394 12.188904 14.64905 14.201751 19.233867 0.559124 1.341898 2.79562 6.933138 5.143941 12.859853 6.150364 15.319999 10.958831 27.285253 12.524378 30.528172 3.690219 7.827737 11.62978 12.859853 20.24029 12.859853 1.453722 0 2.907445-0.111825 4.249343-0.4473 28.738975-5.59124 75.929044-35.112989 140.451958-87.894298 1.565547-1.341898 2.683795-2.124671 3.131095-2.571971l9.169634-6.597663v-26.167005l-9.05781-6.597664z m-160.468598 76.152694c-6.709488-14.201751-3.690219-7.939561-4.920291-10.847006-1.677372-3.913868-10.623357-21.246713-22.364962-29.07445s-73.245249-43.052551-106.792691-75.481745-57.589776-40.256931-64.299264-45.848171-55.688754-35.336639-45.848171-49.202915c9.840583-13.866276 31.87007 2.460146 38.579559 5.143941 6.709488 2.683795 74.363497 43.49985 77.159117 42.381602s-15.096349-24.601458-37.461311-38.020435-68.213132-56.471528-77.159117-63.74014-31.310946-25.160582-20.128465-39.697806 27.397078 0 27.397078 0 44.729923 36.343062 50.880287 39.697806 53.452258 37.46131 61.615469 47.525543c0 0 1.006423-8.386861-24.154159-27.956201s-37.46131-37.46131-51.998535-48.643792-51.439411-33.547442-55.017805-40.25693-3.690219-15.655473 8.051386-24.042334 40.927879 12.859853 40.927879 12.859853 53.675907 35.783938 58.037075 41.375179 53.228608 54.235032 57.477951 51.439411c4.361167-2.79562-2.236496-13.866276-15.655473-29.633574-13.418977-15.655473-61.16817-75.481745-71.120577-86.664225-9.952408-11.182481-14.537225-25.83153-3.578394-33.659267s40.033281 20.799414 40.033281 20.799414 36.902186 34.106566 48.084667 43.611675 41.375179 45.289047 46.407295 49.762039 48.755616 38.579558 55.912404 42.493427c7.268612 3.913868 14.872699 13.642626 21.134888 8.834159 6.262189-4.920292 4.808467-11.070656 8.051386-48.531966 3.242919-37.46131 11.85343-71.008753 35.783939-78.836489s30.751822 10.623357 28.403501 12.859853-20.911239 64.858388-14.64905 89.459846 16.997371 28.515326 14.64905 60.944519-8.945985 72.686125-5.032117 83.309482 11.070656 26.726129 31.087297 41.822478v3.690218s-66.088461 59.378973-114.844077 77.606417c-5.703065 2.124671-12.077079 0-14.64905-5.479416z" fill="#FFFFFF" p-id="39427"></path><path d="M769.137848 975.335969c48.755616-18.227444 114.844077-77.606416 114.844077-77.606417v-3.690218c-20.01664-15.096349-27.173428-31.199121-31.087297-41.822478s2.79562-50.880287 5.032117-83.309482-8.386861-36.343062-14.64905-60.944519 12.412554-87.22335 14.64905-89.459846-4.472992-20.687589-28.403501-12.859853-32.541019 41.375179-35.783939 78.836489c-3.242919 37.46131-1.789197 43.611675-8.051386 48.531966-6.262189 4.920292-13.866276-4.920292-21.134888-8.834159-7.268612-3.913868-50.880287-38.020434-55.912404-42.493427s-35.224814-40.256931-46.407295-49.762039-48.084667-43.611675-48.084667-43.611675-29.07445-28.515326-40.033281-20.799414-6.374014 22.476786 3.578394 33.659267 57.701601 71.008753 71.120577 86.664225 20.01664 26.837954 15.655473 29.633574c-4.361167 2.79562-53.116783-45.848171-57.477951-51.439411s-58.037075-41.375179-58.037075-41.375179-29.186275-21.246713-40.927879-12.859853-11.741605 17.332845-8.051386 24.042334 40.48058 29.07445 55.017805 40.25693 26.837954 29.07445 51.998535 48.643792 24.154158 27.956202 24.154159 27.956201c-8.275036-10.064233-55.465104-44.170799-61.615469-47.525543s-50.880287-39.697807-50.880287-39.697806-16.214597-14.537225-27.397078 0 11.182481 32.429194 20.128465 39.697806 54.794156 50.321163 77.159117 63.74014 40.256931 36.902186 37.461311 38.020435-70.449629-39.697807-77.159117-42.381602c-6.709488-2.683795-28.738975-19.122042-38.579559-5.143941-9.840583 13.866276 39.138683 43.611675 45.848171 49.202915s30.751822 13.418977 64.299264 45.848171 95.051086 67.654008 106.792691 75.481745 20.687589 25.160582 22.364962 29.07445c1.230073 2.907445-1.789197-3.354744 4.920291 10.847006 2.571971 5.479416 8.945985 7.604087 14.64905 5.479416z" fill="#3BE3C3" p-id="39428"></path></svg>
        {% elif icon_type == "pain" %}
            <svg t="1766827716362" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="41495" width="32" height="32"><path d="M810.36025 225.830306a113.181974 113.181974 0 0 0 113.493525-112.914931A113.181974 113.181974 0 0 0 810.36025 0.000445a113.181974 113.181974 0 0 0-113.493525 112.91493 113.181974 113.181974 0 0 0 113.493525 112.914931z m-67.383999 50.204194l260.367498 216.394321c24.033923 19.983762 27.193939 55.856617 7.121162 79.534481l-2.225363 2.625929a57.28085 57.28085 0 0 1-80.202091 7.210177l-229.479456-190.713629-123.730195 97.78246h83.228584c22.698705 0 42.370916 13.040629 52.162514 31.956216 6.453553 10.681744 9.480047 23.544343 7.922294 36.807508l-29.864375 243.988825a58.705082 58.705082 0 0 1-65.24765 50.871803 58.527053 58.527053 0 0 1-51.138847-64.980606l22.342647-181.901191H486.035813c-4.628756 0-9.123989-0.534087-13.485701-1.557754l58.260009 92.664125c7.788771 12.462034 10.281178 26.793373 8.011308 40.368089a57.636908 57.636908 0 0 1-10.014135 28.484649l-160.626718 232.817501a59.016633 59.016633 0 0 1-81.492801 15.13247 58.393531 58.393531 0 0 1-15.221485-81.092236l140.687464-203.887779-66.048781-105.170666-42.905003-60.084807a91.195385 91.195385 0 0 1-6.898626-121.504833 58.215502 58.215502 0 0 1-37.252581-73.570508l77.576162-233.48511a58.838604 58.838604 0 0 1 83.584643-32.979883c4.628756 0.534087 9.257511 1.424232 13.797252 3.115508l196.143515 71.300638c5.429886 1.824798 10.4147 4.584248 14.776412 7.877786 8.189337 4.183683 15.889093 9.613569 22.698705 16.467688l70.187957 69.742884c1.869305 1.869305 3.560581 3.827625 5.162842 5.785944zM429.467079 227.299045l-40.279074 121.326804 100.141345-99.651766-59.862271-21.675038zM64.730046 273.008006l42.415423 62.176649 29.997897-22.342647 17.446847 91.773979-29.997896-53.408717-18.604037 15.043455-41.258234-93.242719zM0.016483 449.835368l72.947407 19.449675 7.877786-36.406942L154.456692 490.915574l-57.725923-20.918415-4.361712 23.58885L0.016483 449.835368z" fill="#565baf" p-id="41496"></path></svg>
        {% elif icon_type == "weight" %}
            <svg t="1766827761802" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="43829" width="32" height="32"><path d="M845.312 666.112l-70.144-239.616c-9.216-31.744-28.16-58.88-54.272-78.848-26.624-19.968-57.856-30.208-90.624-30.208h-28.672c4.096-10.752 6.144-22.528 6.144-34.304 0-53.76-43.52-97.28-97.28-97.28s-97.28 43.52-97.28 97.28c0 11.776 2.048 23.552 6.144 34.304h-56.32c-52.224 0-98.816 35.328-113.152 85.504l-74.752 263.68c-3.072 11.776-5.12 23.552-5.12 35.84v82.432c0 27.648 22.528 50.176 50.176 50.176h579.584c27.648 0 50.176-22.528 50.176-50.176v-81.92c0.512-12.8-1.536-25.088-4.608-36.864z m-406.528 46.08L373.76 617.472l-33.792 36.864v59.392h-51.2V487.424h51.2v103.424l93.184-102.4H496.64L406.528 583.68l97.28 129.024H438.784z m287.744-45.056c-15.872 32.768-50.176 49.152-103.424 49.152-71.68-2.56-108.544-41.472-111.616-116.736 4.096-72.704 40.448-111.616 108.544-115.712 51.712 0 86.528 18.944 104.448 57.344l-47.104 17.408c-10.752-20.48-29.696-30.72-56.32-30.72-34.304 3.584-52.736 27.648-55.296 72.704 1.536 46.592 20.992 71.168 59.392 74.752 26.112 0 44.032-7.68 54.272-23.552V624.64h-66.56v-40.96h113.664v83.456z" fill="#00B4E6" p-id="43830"></path></svg>
        {% elif icon_type == "spo2" %}
            <svg t="1766827794493" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="44958" width="32" height="32"><path d="M75.406476 876.834894V57.930752h-15.413206a28.965376 28.965376 0 1 1 0-57.906893h333.60287a28.965376 28.965376 0 1 1 0 57.906893h-15.413206v818.904142a151.459807 151.459807 0 0 1-302.800317 0z m24.408221-554.636842h253.936157V57.930752H99.814697z m478.883079 475.423459c0-147.021949 144.612144-274.980195 144.039517-303.56382 0.214735 28.917657 144.111096 159.381145 144.111096 303.56382a151.221213 151.221213 0 0 1-144.111096 152.915233 146.998089 146.998089 0 0 1-144.039517-152.915233z m173.219628-476.759588a69.574165 69.574165 0 0 1-23.859453-15.72338 68.309614 68.309614 0 0 1-15.293909-24.193485 86.562095 86.562095 0 0 1-5.24908-30.826413 87.922084 87.922084 0 0 1 5.320658-31.184305 65.303323 65.303323 0 0 1 39.105644-39.630551 92.02591 92.02591 0 0 1 62.273172 0 66.806468 66.806468 0 0 1 39.344238 39.845286 88.804884 88.804884 0 0 1 5.177501 31.017289 86.991565 86.991565 0 0 1-5.296799 31.017289 67.59383 67.59383 0 0 1-15.293909 24.312782 68.405051 68.405051 0 0 1-23.859453 15.627942 85.178247 85.178247 0 0 1-31.279743 5.392236 82.935458 82.935458 0 0 1-31.088867-5.65469z m11.428678-113.570996a35.789179 35.789179 0 0 0-13.09884 16.820914 75.539028 75.539028 0 0 0 0 51.679575 36.910574 36.910574 0 0 0 12.955683 16.701617 33.784985 33.784985 0 0 0 19.851065 5.821707 33.236218 33.236218 0 0 0 27.462231-12.860245 67.116641 67.116641 0 0 0 0-71.196608 33.403234 33.403234 0 0 0-27.462231-12.812526 34.071299 34.071299 0 0 0-19.707908 5.845566z m-99.183746 114.024325a62.034578 62.034578 0 0 1-9.543781-12.430775 90.665921 90.665921 0 0 1-20.996318 12.526213 58.574957 58.574957 0 0 1-22.7142 4.199264 43.662799 43.662799 0 0 1-20.280534-4.461718 33.403234 33.403234 0 0 1-13.432872-12.19218 31.661494 31.661494 0 0 1-4.771891-16.701617 29.418705 29.418705 0 0 1 7.778182-20.686146 39.177222 39.177222 0 0 1 21.473507-11.452537c1.908756-0.42947 6.585209-1.431567 14.124796-2.910854s13.981639-2.910853 19.373876-4.199263 11.213943-2.815415 17.488979-4.581015a31.518337 31.518337 0 0 0-4.771891-17.178806 21.759821 21.759821 0 0 0-17.560557-5.463815 36.791276 36.791276 0 0 0-17.131087 3.125588 27.796263 27.796263 0 0 0-9.901673 9.543781 93.051866 93.051866 0 0 1-5.797847 8.255371 9.686938 9.686938 0 0 1-7.300993 1.980335 12.669369 12.669369 0 0 1-8.68484-3.149448 10.402721 10.402721 0 0 1-3.698216-8.207652 24.622955 24.622955 0 0 1 5.606972-15.150753 40.060021 40.060021 0 0 1 17.4174-12.144461 79.833729 79.833729 0 0 1 29.490284-4.771891 84.486323 84.486323 0 0 1 31.017289 4.604875 28.631343 28.631343 0 0 1 15.938114 14.554266 63.370707 63.370707 0 0 1 4.652594 26.412414v17.679855c0 4.843469 0 10.187986-0.167016 16.15285a59.934946 59.934946 0 0 0 2.791556 17.393541 51.202386 51.202386 0 0 1 2.839275 11.595694 10.808332 10.808332 0 0 1-4.36628 8.30309 14.458828 14.458828 0 0 1-9.782376 3.722074 13.289715 13.289715 0 0 1-9.090452-4.36628z m-30.659397-50.104851c-8.374668 1.7656-14.148656 3.05401-17.321962 3.865232a24.121907 24.121907 0 0 0-9.305187 4.891187 12.502353 12.502353 0 0 0-4.36628 10.116408 14.721282 14.721282 0 0 0 5.177501 11.428678 19.278438 19.278438 0 0 0 13.504451 4.771891 35.622163 35.622163 0 0 0 16.367584-3.865231 25.243301 25.243301 0 0 0 10.975349-9.901673 44.330864 44.330864 0 0 0 4.103826-22.069994v-4.223123a153.416282 153.416282 0 0 1-19.135282 4.986625z m-183.14516 45.523836a51.584137 51.584137 0 0 1-17.823011-17.035649 38.175125 38.175125 0 0 1-6.895382-20.757724 13.862342 13.862342 0 0 1 4.127685-10.04483 14.172515 14.172515 0 0 1 10.45044-4.151545 12.383056 12.383056 0 0 1 8.708701 3.221027 25.792069 25.792069 0 0 1 6.10802 9.543781 62.893518 62.893518 0 0 0 6.656787 12.669369 25.935225 25.935225 0 0 0 9.997111 8.422387 37.530919 37.530919 0 0 0 16.98793 3.292605 38.175125 38.175125 0 0 0 23.501561-6.680647 20.018081 20.018081 0 0 0 9.114311-16.701617 17.679855 17.679855 0 0 0-4.938906-12.836386 31.82851 31.82851 0 0 0-12.621651-7.515728 205.668484 205.668484 0 0 0-20.686146-5.511533 157.209935 157.209935 0 0 1-28.965375-9.376765 46.502074 46.502074 0 0 1-18.514936-14.649704 37.578638 37.578638 0 0 1-6.847663-22.952794 39.010206 39.010206 0 0 1 7.157836-23.286826 45.929447 45.929447 0 0 1 20.92474-15.675661 87.778927 87.778927 0 0 1 32.25798-5.463814 82.315113 82.315113 0 0 1 25.625053 3.626637 54.876742 54.876742 0 0 1 17.918449 9.543781 39.463535 39.463535 0 0 1 10.402722 12.597791 28.34503 28.34503 0 0 1 3.292604 12.884104 14.983736 14.983736 0 0 1-4.103826 10.355003 13.07498 13.07498 0 0 1-10.187986 4.604874 11.929726 11.929726 0 0 1-8.541684-2.767696 38.175125 38.175125 0 0 1-6.322755-9.042733 41.467729 41.467729 0 0 0-10.49816-14.029358 31.017289 31.017289 0 0 0-19.731767-5.034345 34.524628 34.524628 0 0 0-20.375973 5.463815 15.890396 15.890396 0 0 0-7.754322 13.170418 13.576029 13.576029 0 0 0 2.60068 8.231511 23.358404 23.358404 0 0 0 7.300993 5.964864 48.935738 48.935738 0 0 0 9.329046 3.865231c3.125588 0.954378 8.30309 2.385945 15.556363 4.103826 9.042733 2.123491 17.274244 4.437858 24.599096 6.96696a75.87306 75.87306 0 0 1 18.729671 9.185889 37.101449 37.101449 0 0 1 12.096742 13.695326 43.662799 43.662799 0 0 1 4.318561 20.304395 46.191901 46.191901 0 0 1-7.515728 25.863647 49.031176 49.031176 0 0 1-21.998415 17.942308 82.601426 82.601426 0 0 1-34.286034 6.537491 77.948833 77.948833 0 0 1-39.177222-8.541685z m448.557715 6.179599a17.393541 17.393541 0 0 1-12.812527-4.509437 14.315672 14.315672 0 0 1-4.652593-10.569738 26.364695 26.364695 0 0 1 2.982432-10.331143 38.652314 38.652314 0 0 1 6.418192-10.116408q14.649704-14.959877 26.245399-25.625052a175.724871 175.724871 0 0 1 16.701617-14.005499 97.6806 97.6806 0 0 0 14.959877-12.597791 50.104851 50.104851 0 0 0 9.090451-13.027261 30.301505 30.301505 0 0 0 3.125589-13.051121 22.905075 22.905075 0 0 0-12.454635-20.877021 26.245398 26.245398 0 0 0-12.550072-3.006292 25.72049 25.72049 0 0 0-22.571043 12.430775 54.06552 54.06552 0 0 0-3.674355 8.899576 36.504963 36.504963 0 0 1-5.797847 11.142365 11.643413 11.643413 0 0 1-9.543781 3.865231 12.478494 12.478494 0 0 1-9.114311-3.555058 12.955683 12.955683 0 0 1-3.578918-9.758516 40.56107 40.56107 0 0 1 3.340323-15.580223 43.567361 43.567361 0 0 1 10.211846-14.721283 49.317489 49.317489 0 0 1 17.059509-10.689035 66.424717 66.424717 0 0 1 24.288923-4.032247 70.64784 70.64784 0 0 1 28.631343 5.22522 43.61508 43.61508 0 0 1 22.523324 23.525421 43.400345 43.400345 0 0 1 3.268745 16.510741 45.929447 45.929447 0 0 1-6.752225 24.40822 73.964304 73.964304 0 0 1-13.766905 17.202666c-4.771891 4.199264-12.526213 10.689035-23.573139 19.588611a179.23221 179.23221 0 0 0-22.594902 20.638427 59.076005 59.076005 0 0 0-5.368377 7.157835h57.262687a21.282632 21.282632 0 0 1 13.051121 3.435762 11.452537 11.452537 0 0 1 4.485577 9.543781 12.287618 12.287618 0 0 1-3.578918 8.971154 14.315672 14.315672 0 0 1-10.760613 3.698215z" fill="#FF426A" p-id="44959"></path></svg>
        {% elif icon_type == "bp" %}
        <svg t="1766827837094" class="icon w-5 h-5"  viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="47018" width="32" height="32"><path d="M674.340571 143.250286c132.681143 0 239.945143 110.518857 239.945143 245.796571 0 203.702857-172.214857 346.258286-302.043428 436.443429a414.72 414.72 0 0 1-25.636572 16.347428l-11.337143 6.582857a1325.348571 1325.348571 0 0 1-52.553142 28.306286l-2.230858 1.133714c-4.205714 1.462857-8.484571 2.925714-12.690285 2.925715a26.806857 26.806857 0 0 1-14.116572-4.388572c-1.462857-1.462857-52.260571-30.537143-81.883428-52.370285-43.739429-30.573714-100.205714-81.481143-167.972572-148.370286 0 0-38.070857-40.740571-39.497143-53.833143l127.012572-7.314286c11.337143 0 22.601143-8.704 25.417143-21.796571l19.748571-84.370286 63.524572 158.573714a27.867429 27.867429 0 0 0 25.417142 17.444572l4.242286-0.365714c9.801143-1.462857 19.236571-8.155429 25.380572-17.115429l70.582857-181.796571h40.886857c14.116571 32 45.202286 55.296 81.92 55.296 49.371429 0 90.331429-42.203429 90.331428-93.147429 0-50.870857-40.96-93.074286-90.331428-93.074286-42.349714 0-79.067429 32-87.552 72.777143h-55.04a27.611429 27.611429 0 0 0-26.843429 18.870857l-52.224 133.851429-70.546285-176.018286a26.477714 26.477714 0 0 0-28.233143-17.481143l-3.730286 0.292572c-10.898286 1.755429-19.126857 11.044571-21.686857 21.540571l-35.291429 149.796572-142.518857 7.314285c-9.874286-7.314286-19.785143-21.833143-24.027428-32.036571C119.588571 489.435429 109.714286 441.453714 109.714286 389.046857 109.714286 253.805714 218.404571 143.250286 351.085714 143.250286c57.856 0 112.932571 23.296 158.098286 64 43.739429-40.740571 104.411429-64 165.12-64z m23.332572 276.553143c16.749714 0 30.939429 14.116571 30.939428 30.72 0 16.64-14.189714 30.72-30.939428 30.72a31.268571 31.268571 0 0 1-30.939429-30.72c0-16.603429 14.153143-30.72 30.939429-30.72z" fill="#4F99FE" p-id="47019"></path></svg>
        {% elif icon_type == "hr" %}
            <svg t="1766827867402" class="icon w-5 h-5" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="48217" width="32" height="32"><path d="M881.803636 569.716364H636.276364a28.392727 28.392727 0 0 1-26.065455-15.127273l-54.923636-99.607273-75.636364 204.101818a30.487273 30.487273 0 0 1-20.945454 17.92h-5.352728a29.556364 29.556364 0 0 1-20.712727-7.68l-112.407273-109.614545a23.272727 23.272727 0 0 1 0-35.84 28.625455 28.625455 0 0 1 39.098182 0l80.989091 76.567273 83.549091-222.021819a28.625455 28.625455 0 0 1 23.272727-17.92 29.323636 29.323636 0 0 1 26.298182 15.127273l75.636364 138.007273H814.545455a186.181818 186.181818 0 0 0 36.538181-112.407273 192.698182 192.698182 0 0 0-365.614545-86.807273 192.698182 192.698182 0 0 0-366.312727 86.807273 199.214545 199.214545 0 0 0 60.043636 139.636364L465.454545 814.545455a25.6 25.6 0 0 0 36.538182 0l206.429091-196.654546h167.098182c20.945455 2.56 33.978182-7.68 33.978182-23.272727a26.530909 26.530909 0 0 0-27.694546-24.901818z" fill="#FF6320" p-id="48218"></path></svg>
        {% else %}
            <span class="text-gray-500">ðŸ“Š</span>
        {% endif %}

        <h3 class="font-bold text-gray-800 text-sm">{{ chart.title }}</h3>
    </div>
    
    <div id="{{ chart.id }}" style="width: 100%; height: 200px;"></div>
</div>

<script>
    (function() {
        var chartId = '{{ chart.id }}';
        var chartData = {{ chart.dates|safe }};
        var seriesData = [
            {% for s in chart.series %}
            {
                name: '{{ s.name }}',
                type: 'line',
                smooth: true,
                symbol: 'circle',
                symbolSize: 6,
                itemStyle: {
                    color: '{{ s.color }}'
                },
                lineStyle: {
                    width: 2
                },
                areaStyle: {
                    opacity: 0.1,
                    color: '{{ s.color }}'
                },
                data: {{ s.data|safe }}
            },
            {% endfor %}
        ];
        var yMin = {{ chart.y_min }};
        var yMax = {{ chart.y_max }};

        // Retry mechanism
        var maxRetries = 20; 
        var retryCount = 0;

        function initChart() {
            if (typeof echarts === 'undefined') {
                if (retryCount < maxRetries) {
                    retryCount++;
                    setTimeout(initChart, 100);
                } else {
                    console.error('ECharts library not loaded.');
                }
                return;
            }

            var chartDom = document.getElementById(chartId);
            if (!chartDom) return;
            
            // Dispose existing instance if any
            var existingChart = echarts.getInstanceByDom(chartDom);
            if (existingChart) {
                existingChart.dispose();
            }

            var myChart = echarts.init(chartDom);
            var option = {
                tooltip: {
                    trigger: 'axis'
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    top: '10%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    boundaryGap: false,
                    data: chartData,
                    axisLine: {
                        lineStyle: {
                            color: '#cbd5e1'
                        }
                    },
                    axisLabel: {
                        color: '#64748b',
                        fontSize: 10
                    }
                },
                yAxis: {
                    type: 'value',
                    min: yMin,
                    max: yMax,
                    splitLine: {
                        lineStyle: {
                            color: '#f1f5f9'
                        }
                    },
                    axisLabel: {
                        color: '#64748b',
                        fontSize: 10
                    }
                },
                series: seriesData
            };

            myChart.setOption(option);
            
            window.addEventListener('resize', function() {
                myChart.resize();
            });
        }

        // Delay slightly to ensure DOM is ready if loaded via HTMX
        setTimeout(initChart, 50);
    })();
</script>
