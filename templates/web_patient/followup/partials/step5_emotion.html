<div class="bg-white rounded-xl shadow-sm overflow-hidden mb-6">
    <div class="p-5 border-b border-slate-100 text-center">
        <h3 class="text-lg font-bold text-slate-800">{{ emotion_survey.title }}</h3>
    </div>
    
    <div class="p-5 space-y-8">
        {% for question in emotion_survey.questions %}
         {% if question.type == 'select' %}
            <p class="text-slate-700 mb-3">{{ question.text }}</p>
            <div class="relative">
                <select name="{{ question.id }}" class="w-full p-3 pr-10 bg-slate-50 border border-slate-200 rounded-lg appearance-none text-slate-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="" disabled selected>{{ question.placeholder }}</option>
                    {% for option in question.options %}
                    <option value="{{ option.value }}">{{ option.label }}</option>
                    {% endfor %}
                </select>
                <div class="absolute inset-y-0 right-0 flex items-center px-3 pointer-events-none text-slate-500">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                </div>
            </div>
         
            {% elif question.type == 'radio_grid' %}
            <!-- Grid Question -->
            <div>
                <p class="font-medium text-slate-800 mb-2">{{ question.text }}</p>
                <div class="grid grid-cols-4 gap-2">
                     {% for option in question.options %}
                     <label class="text-center">
                         <input type="radio" name="{{ question.id }}" value="{{ option }}" class="block mx-auto mb-1">
                         <span class="text-xs">{{ option }}</span>
                     </label>
                     {% endfor %}
                </div>
            </div>
            
            <!-- Add separator after Q7 and Q16 based on original design, or just keep it simple -->
            {% if forloop.counter == 7 or forloop.counter == 16 %}
            <div class="h-px bg-slate-100 my-4"></div>
            {% endif %}

            {% else %}
            <!-- Standard Question (Radio or Checkbox) -->
            <div>
                <p class="font-bold text-slate-800 mb-3">{{ question.text }}</p>
                <div class="space-y-3">
                    {% for option in question.options %}
                    <label class="flex items-center gap-3">
                        {% if question.type == 'checkbox' %}
                            <input type="checkbox" name="{{ question.id }}" value="{{ option.value }}" class="w-4 h-4 text-blue-600 rounded">
                        {% else %}
                            <input type="radio" name="{{ question.id }}" value="{{ option.value }}" class="w-4 h-4 text-blue-600">
                        {% endif %}
                        <span class="text-slate-700">{{ option.label }}</span>
                    </label>
                    {% endfor %}
                </div>
            </div>
            {% endif %}
        {% endfor %}

    </div>
</div>

<button type="button" onclick="nextStep(5)" class="w-full py-3 bg-blue-600 text-white rounded-lg font-bold shadow-md active:bg-blue-700 transition">
    下一题
</button>
