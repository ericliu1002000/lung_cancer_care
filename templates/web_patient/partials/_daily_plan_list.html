{% if daily_plans %}
<div class="space-y-4">
  {% for plan in daily_plans %}
  <div class="bg-slate-50 rounded-xl p-4 border border-slate-100 flex items-center justify-between active:bg-slate-100 transition group">
    <div class="flex items-center gap-4">
      <!-- Icon -->
      <div class="w-12 h-12 rounded-full flex items-center justify-center shrink-0 bg-white shadow-sm text-slate-600 group-hover:scale-110 transition-transform duration-300">
        {% if plan.type == 'medication' %}
         <svg
                t="1765679457106"
                class="icon w-5 h-5"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="22091"
                width="32"
                height="32"
              >
                <path
                  d="M902.4 121.6c-51.2-51.2-121.6-76.8-192-76.8s-140.8 25.6-192 76.8L121.6 512c-108.8 108.8-108.8 281.6 0 384 51.2 51.2 121.6 76.8 192 76.8s140.8-25.6 192-76.8l396.8-384c51.2-51.2 76.8-121.6 76.8-192 0-76.8-25.6-147.2-76.8-198.4zM480 870.4c-44.8 44.8-102.4 70.4-166.4 70.4s-121.6-25.6-166.4-70.4C57.6 780.8 57.6 633.6 147.2 537.6l179.2-179.2 332.8 332.8-179.2 179.2z m364.8-665.6c-6.4 6.4-19.2 6.4-25.6 0-32-32-70.4-44.8-108.8-44.8-44.8 0-83.2 19.2-108.8 44.8l-121.6 128c-12.8 0-19.2 6.4-19.2 6.4-6.4 0-12.8 0-12.8-6.4-6.4-6.4-6.4-19.2 0-25.6l128-128c38.4-38.4 83.2-57.6 140.8-57.6 51.2 0 102.4 19.2 140.8 57.6-6.4 6.4-6.4 19.2-12.8 25.6z"
                  fill="#1684FC"
                  p-id="22092"
                ></path>
              </svg>
        {% elif plan.type == 'temperature' %}
        <svg
                t="1765679517010"
                class="icon w-6 h-6"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="24205"
                width="32"
                height="32"
              >
                <path
                  d="M846.611917 85.510536c-59.643402-39.140439-139.895167-22.38994-178.919972 37.309744L341.052606 622.593817c-7.867178 12.038174-11.592013 31.724539-8.668427 45.816488l20.085454 96.674806L266.953981 895.961882c-12.363585 18.891256-7.082302 44.254923 11.799744 56.646138 18.885116 12.390191 44.193525 7.113001 56.561204-11.778254l84.470857-129.270179 99.121532-20.745487c14.048971-2.960425 30.577413-14.245446 38.444591-26.282596l326.637292-499.773538C923.014005 205.057259 906.247132 124.651998 846.611917 85.510536zM866.518293 253.290797 539.881001 753.064334c-4.828982 7.399527-16.636912 15.46932-25.25929 17.267269L390.907061 796.223297c-2.734274 0.569982-5.499248 0.047072-7.839549-1.474584-2.320858-1.542122-3.921309-3.879354-4.489244-6.603395l-25.749454-123.968429c-1.805112-8.654101 0.867764-22.718421 5.689582-30.116925l326.643432-499.774561c32.712029-50.059116 100.024088-64.095807 150.015665-31.28247C885.185444 135.813199 899.246695 203.243961 866.518293 253.290797zM774.693957 194.285938c-38.542828-25.302269-90.436732-14.480806-115.656113 24.118304l-14.263865 21.825075 37.60241 24.663726c7.603165 4.997827 9.743922 15.259542 4.780887 22.892383-4.999874 7.610328-15.249309 9.748015-22.858614 4.76656l-37.59013-24.681122-51.584865 78.9317 37.601386 24.662703c7.615445 5.01113 9.751085 15.258519 4.770653 22.87908-4.980431 7.621585-15.216563 9.756201-22.817682 4.774747l-37.615713-24.692379-51.577702 78.929654 37.589107 24.681122c3.704368 2.425236 6.230911 6.134721 7.123234 10.45205 0.902556 4.330632 0.069585 8.741082-2.351558 12.42703-4.981455 7.621585-15.232936 9.759271-22.838148 4.761444l-37.59627-24.679076-51.577702 78.929654 37.594223 24.664749c3.697205 2.426259 6.235005 6.149047 7.126304 10.467399 0.900509 4.316306 0.069585 8.741082-2.344395 12.426007-4.983501 7.606235-15.226796 9.741875-22.839171 4.747117L417.768849 587.568093l-10.570753 16.173354c-3.721765 5.705955-5.783727 16.544815-4.384867 23.214724l19.85214 95.576799c0.440022 2.113127 1.674129 3.919263 3.461845 5.105275 1.799996 1.167592 3.935636 1.572822 6.043646 1.1328l95.385441-19.953448c6.650467-1.38658 15.748682-7.614421 19.470447-13.319353l251.835655-385.320832C824.095088 271.575232 813.253158 219.583091 774.693957 194.285938z"
                  fill="#01B695"
                  p-id="24206"
                ></path>
                <path
                  d="M176.23277 179.806155c18.10024-1.804089 28.052916-11.755742 29.877471-29.877471-1.824555-17.188474-11.777231-26.694989-29.877471-28.519544-17.20894 1.824555-26.715455 11.33107-28.519544 28.519544C149.517315 168.050414 159.02383 178.002067 176.23277 179.806155L176.23277 179.806155zM176.23277 94.247524c34.397415 3.628644 53.410444 22.195511 57.039087 55.68116-3.628644 34.418904-22.641673 53.431933-57.039087 57.039087-33.506115-3.607154-52.072983-22.620184-55.68116-57.039087C124.159788 116.444059 142.727679 97.876168 176.23277 94.247524L176.23277 94.247524zM345.991082 110.544699c47.977711 2.715855 72.868611 15.405875 74.694189 38.026058-0.912789 14.493086-8.148587 22.195511-21.728884 23.086811-3.628644 0-9.060353-1.357927-16.297175-4.074805-12.688997-4.519943-24.912389-6.79066-36.668131-6.79066-41.654702 1.824555-63.383586 28.073382-65.186651 78.767971 2.715855 47.999201 24.444738 73.335239 65.186651 76.052117 11.755742 0 24.445762-3.162016 38.026058-9.506515 7.235798-3.607154 13.113669-5.432733 17.655102-5.432733 12.668531 0.912789 20.370956 9.061376 23.086811 24.444738-0.912789 24.445762-27.161616 37.113269-78.767971 38.026058-74.248028-4.519943-114.077152-46.174646-119.509884-124.942617C231.91393 158.543899 271.743054 115.976408 345.991082 110.544699L345.991082 110.544699z"
                  fill="#01B695"
                  p-id="24207"
                ></path>
              </svg>
        {% elif plan.type == 'bp_hr' %}
       <svg
                class="w-5 h-5 text-purple-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"
                />
              </svg>
        {% elif plan.type == 'spo2' %}
        <svg
                class="w-5 h-5 text-cyan-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M19.428 15.428a2 2 0 00-1.022-.547l-2.384-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"
                />
              </svg>
        {% elif plan.type == 'weight' %}
        <svg
                class="w-5 h-5 text-emerald-500"
                fill="none"
                viewBox="0 0 24 24"
                stroke="currentColor"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-width="2"
                  d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3"
                />
              </svg>
        {% elif plan.type == 'followup' %}
      <svg
                t="1765678143286"
                class="icon w-5 h-5"
                viewBox="0 0 1024 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="5267"
                width="32"
                height="32"
              >
                <path
                  d="M853.333333 938.666667H170.666667a85.333333 85.333333 0 0 1-85.333334-85.333334V298.666667a85.333333 85.333333 0 0 1 85.333334-85.333334h85.333333V170.666667a85.333333 85.333333 0 0 1 85.333333-85.333334h341.333334a85.333333 85.333333 0 0 1 85.333333 85.333334v42.666666h85.333333a85.333333 85.333333 0 0 1 85.333334 85.333334v554.666666a85.333333 85.333333 0 0 1-85.333334 85.333334zM405.333333 725.333333h74.666667v74.666667a32 32 0 0 0 64 0V725.333333H618.666667a32 32 0 0 0 0-64h-74.666667v-74.666666a32 32 0 0 0-64 0V661.333333H405.333333a32 32 0 0 0 0 64zM704 192a42.666667 42.666667 0 0 0-42.666667-42.666667H362.666667a42.666667 42.666667 0 0 0-42.666667 42.666667v21.333333h384V192z m138.666667 192h-661.333334a32 32 0 0 0 0 64h661.333334a32 32 0 0 0 0-64z"
                  fill="#FCBD3F"
                  p-id="5268"
                ></path>
              </svg>
        {% elif plan.type == 'checkup' %}
        <svg
                t="1765678294219"
                class="icon w-5 h-5"
                viewBox="0 0 1029 1024"
                version="1.1"
                xmlns="http://www.w3.org/2000/svg"
                p-id="13235"
                width="32"
                height="32"
              >
                <path
                  d="M372.224 951.808H118.784C56.32 951.296 5.12 900.608 5.12 838.144V113.664C5.12 51.2 56.32 0 118.784 0h579.584c62.464 0 113.664 51.2 113.664 113.664v217.088c0.512 22.528-17.408 41.472-39.936 42.496h-1.536c-22.528 0-40.448-17.408-41.472-39.936V113.664c0-17.408-13.824-31.232-31.232-31.232H118.784c-17.408 0-31.232 13.824-31.232 31.232v723.968c0 17.408 13.824 31.232 31.232 31.232h254.464c22.528 0 40.448 17.408 41.472 39.936 0.512 22.528-17.408 41.984-39.936 42.496h-1.536l-1.024 0.512z"
                  p-id="13236"
                  fill="#2563eb"
                ></path>
                <path
                  d="M191.488 517.12c-11.264-0.512-21.504-5.12-29.184-12.8-7.68-8.192-11.264-18.432-11.264-29.696 0.512-21.504 18.432-39.424 39.936-39.936h181.248c23.04 0.512 40.96 19.968 39.936 42.496-0.512 21.504-18.432 39.424-39.936 39.936H191.488z m-1.536-217.088c-22.528 0-40.448-17.408-41.472-39.936-0.512-11.264 3.584-21.504 11.264-29.696 7.68-8.192 17.92-12.8 28.672-12.8h438.272c22.528 0 40.448 17.408 41.472 39.936 0.512 22.528-17.408 41.984-39.936 42.496H189.952z m491.52 568.32c0 22.016 17.92 39.936 39.936 39.936s39.936-17.92 39.936-39.936-17.92-39.936-39.936-39.936-39.936 17.92-39.936 39.936z m39.424-351.232c-22.016 0-39.936 17.92-39.936 39.936v198.656c0 22.016 17.92 39.936 39.936 39.936s39.936-17.92 39.936-39.936v-198.656c0-22.016-17.92-39.936-39.936-39.936z"
                  p-id="13237"
                  fill="#2563eb"
                ></path>
                <path
                  d="M716.288 1024c-173.056 0-313.344-140.288-313.344-312.832 0-83.456 32.256-162.304 91.648-221.696 58.88-59.392 137.728-91.648 221.184-92.16 173.056 0 313.344 140.288 313.344 312.832 0 83.968-32.256 162.304-91.648 221.696-57.856 58.368-137.728 91.648-220.16 91.648h-1.024z m0-542.72c-126.976 0-230.4 103.424-230.4 230.4s103.424 230.4 230.4 230.4 230.4-103.424 230.4-230.4c0-125.44-100.352-227.84-225.28-230.4h-5.12z"
                  p-id="13238"
                  fill="#2563eb"
                ></path>
              </svg>
        {% else %}
        <svg class="w-6 h-6 text-slate-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
        </svg>
        {% endif %}
      </div>
      
      <div>
        <h4 class="font-bold text-slate-800 text-base">{{ plan.title }}</h4>
        <p class="text-sm text-slate-500 mt-1 {% if plan.status == 'completed' %}text-emerald-600 font-medium{% endif %}">
          {{ plan.subtitle }}
        </p>
      </div>
    </div>

    <!-- Status Action -->
    <div>
      {% if plan.status == 'completed' %}
      <div class="w-8 h-8 rounded-full bg-emerald-100 flex items-center justify-center text-emerald-600">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7" />
        </svg>
      </div>
      {% else %}
      <button 
        onclick="handleTaskClick('{{ plan.title }}', '{{ plan.type }}', '{{ plan.url|default:'' }}')"
        class="bg-blue-600 text-white text-sm font-bold px-4 py-2 rounded-full shadow-md shadow-blue-200 hover:bg-blue-700 active:scale-95 transition whitespace-nowrap"
      >
        {{ plan.action_text }}
      </button>
      {% endif %}
    </div>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="flex flex-col items-center justify-center py-20 opacity-60">
  <svg class="w-16 h-16 text-slate-300 mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
  </svg>
  <p class="text-slate-500 font-medium">该日期暂无健康计划</p>
</div>
{% endif %}